"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _spinalCoreConnectorjs = require("spinal-core-connectorjs");

var _spinalCoreConnectorjs2 = _interopRequireDefault(_spinalCoreConnectorjs);

var _spinalCoreConnectorjs_type = require("spinal-core-connectorjs_type");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class OperationModel extends Model {

  constructor(name, dbId) {
    super();
    this.add_attr({
      creation: Date.now(),
      lastUpdate: Date.now(),
      dbId: dbId,
      name: name,
      state: new _spinalCoreConnectorjs_type.Choice(0, ["processing", "validated", "not validated"]),
      comments: ""
    });
  }

  validate() {
    this.state.set(1);
    this.lastUpdate.set(Date.now());
  }

  invalidate() {
    this.state.set(2);
    this.lastUpdate.set(Date.now());
  }

  initializeSate() {
    this.state.set(0);
    this.lastUpdate.set(Date.now());
  }

  addComment(comment) {
    this.comments.set(comment);
  }

}

exports.default = OperationModel;

_spinalCoreConnectorjs2.default.register_models([OperationModel]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vcGVyYXRpb25Nb2RlbC5qcyJdLCJuYW1lcyI6WyJPcGVyYXRpb25Nb2RlbCIsIk1vZGVsIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZGJJZCIsImFkZF9hdHRyIiwiY3JlYXRpb24iLCJEYXRlIiwibm93IiwibGFzdFVwZGF0ZSIsInN0YXRlIiwiQ2hvaWNlIiwiY29tbWVudHMiLCJ2YWxpZGF0ZSIsInNldCIsImludmFsaWRhdGUiLCJpbml0aWFsaXplU2F0ZSIsImFkZENvbW1lbnQiLCJjb21tZW50Iiwic3BpbmFsQ29yZSIsInJlZ2lzdGVyX21vZGVscyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUlBLE1BQU1BLGNBQU4sU0FBNkJDLEtBQTdCLENBQW1DOztBQUVqQ0MsY0FBWUMsSUFBWixFQUFrQkMsSUFBbEIsRUFBd0I7QUFDdEI7QUFDQSxTQUFLQyxRQUFMLENBQWM7QUFDWkMsZ0JBQVVDLEtBQUtDLEdBQUwsRUFERTtBQUVaQyxrQkFBWUYsS0FBS0MsR0FBTCxFQUZBO0FBR1pKLFlBQU1BLElBSE07QUFJWkQsWUFBTUEsSUFKTTtBQUtaTyxhQUFPLElBQUlDLGtDQUFKLENBQVcsQ0FBWCxFQUFjLENBQUMsWUFBRCxFQUFlLFdBQWYsRUFBNEIsZUFBNUIsQ0FBZCxDQUxLO0FBTVpDLGdCQUFVO0FBTkUsS0FBZDtBQVFEOztBQUVEQyxhQUFXO0FBQ1QsU0FBS0gsS0FBTCxDQUFXSSxHQUFYLENBQWUsQ0FBZjtBQUNBLFNBQUtMLFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CUCxLQUFLQyxHQUFMLEVBQXBCO0FBQ0Q7O0FBRURPLGVBQWE7QUFDWCxTQUFLTCxLQUFMLENBQVdJLEdBQVgsQ0FBZSxDQUFmO0FBQ0EsU0FBS0wsVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JQLEtBQUtDLEdBQUwsRUFBcEI7QUFDRDs7QUFFRFEsbUJBQWlCO0FBQ2YsU0FBS04sS0FBTCxDQUFXSSxHQUFYLENBQWUsQ0FBZjtBQUNBLFNBQUtMLFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CUCxLQUFLQyxHQUFMLEVBQXBCO0FBQ0Q7O0FBRURTLGFBQVdDLE9BQVgsRUFBb0I7QUFDbEIsU0FBS04sUUFBTCxDQUFjRSxHQUFkLENBQWtCSSxPQUFsQjtBQUNEOztBQS9CZ0M7O2tCQW1DcEJsQixjOztBQUNmbUIsZ0NBQVdDLGVBQVgsQ0FBMkIsQ0FBQ3BCLGNBQUQsQ0FBM0IiLCJmaWxlIjoib3BlcmF0aW9uTW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3BpbmFsQ29yZSBmcm9tIFwic3BpbmFsLWNvcmUtY29ubmVjdG9yanNcIjtcbmltcG9ydCB7XG4gIENob2ljZVxufSBmcm9tIFwic3BpbmFsLWNvcmUtY29ubmVjdG9yanNfdHlwZVwiO1xuXG5jbGFzcyBPcGVyYXRpb25Nb2RlbCBleHRlbmRzIE1vZGVsIHtcblxuICBjb25zdHJ1Y3RvcihuYW1lLCBkYklkKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFkZF9hdHRyKHtcbiAgICAgIGNyZWF0aW9uOiBEYXRlLm5vdygpLFxuICAgICAgbGFzdFVwZGF0ZTogRGF0ZS5ub3coKSxcbiAgICAgIGRiSWQ6IGRiSWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgc3RhdGU6IG5ldyBDaG9pY2UoMCwgW1wicHJvY2Vzc2luZ1wiLCBcInZhbGlkYXRlZFwiLCBcIm5vdCB2YWxpZGF0ZWRcIl0pLFxuICAgICAgY29tbWVudHM6IFwiXCJcbiAgICB9KVxuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoMSk7XG4gICAgdGhpcy5sYXN0VXBkYXRlLnNldChEYXRlLm5vdygpKTtcbiAgfVxuXG4gIGludmFsaWRhdGUoKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXQoMik7XG4gICAgdGhpcy5sYXN0VXBkYXRlLnNldChEYXRlLm5vdygpKTtcbiAgfVxuXG4gIGluaXRpYWxpemVTYXRlKCkge1xuICAgIHRoaXMuc3RhdGUuc2V0KDApO1xuICAgIHRoaXMubGFzdFVwZGF0ZS5zZXQoRGF0ZS5ub3coKSk7XG4gIH1cblxuICBhZGRDb21tZW50KGNvbW1lbnQpIHtcbiAgICB0aGlzLmNvbW1lbnRzLnNldChjb21tZW50KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IE9wZXJhdGlvbk1vZGVsO1xuc3BpbmFsQ29yZS5yZWdpc3Rlcl9tb2RlbHMoW09wZXJhdGlvbk1vZGVsXSk7Il19